# DSAI-HW3-2021

## 檔案說明

- main.py	為主程式，負責讀入前7天的data，並使用模型進行預測。
- night.h5    為訓練出來的lstm模型，用於預測接下來一天的產電耗電量
- pipfile, pipfile.lock   版本控制

- training.ipynb / training.py   為用於讀取訓練資料，訓練處night.h5模型用的筆記本/程式

## 模型說明

第一次訓練模型時，用上了時間，耗電量，產電量三類data，用前7天的data預測接下來一整天的產電耗電量。模型選擇是LSTM。然而，做出來之後測試發現，效果並不好，甚至不如什麼投標都不做的收益高。於是拋棄了此模型。

第二次訓練，針對每個小時單獨訓練模型，針對各個小時，用前七天的對應時間的data，猜測新一天的對應時間的產電耗電量。效果不錯，然而由於模型有點多，加載時間實在是太長，無法在限制的時間內完成運行，於是又拋棄了這個做法。

第三次仔細觀察了數據，發現白天預測的準確率不佳，但是夜晚以及早上由於產電量總是會低於耗電量，有一個比較明顯的特徵，不容易出錯。因此單獨訓練晚上6點到早上6點的模型，用於預測需要買多少電比較合適。訓練時，將產電量與耗電量相減，得到電量差值，直接用前7天的電量差值，預測後一天的電量差，模型小，效果也不錯。就這樣定了下來，白天選擇先不預測，晚上選擇用模型預測需要買多少電，然後穩妥起見，將預測得到的數值向下取整，得到最終要買的電的量。

## 執行main.py

只需

```shell
python main.py --cunsumption [path] --generation [path] --bidresult [path] --output [path]
# 四者對應的默認值分別為 ./sample_data/consumption.csv
#                    ./sample_data/generation.csv
#                    ./sample_data/bidresult.csv
#                    output.csv
```

